{"compiled_instruction": "Generate JS code using `let` instead of `var`. All the `os` functions are already defined.\n### Instruction:\n Create a self executing function that defines a function called `minesweeper` on the `window.os.apps` object having the following functionality:\n* creates a root dom element with the class `gmroot`\n* generate a matrix of 8x8 with values 0\n* pick a random of 10 cells and set their value to -100 and increase the number value of the neighboring cells\n* set score to 64\n* add a div with the class `score` and the content `Discovered: 64` to the root dom element\n* iterate through the matrix and for each row add a div element with the class `.row` and for each item add a div with the class `cell`,  ` ` as content and add data-x and data-y as attributes. when the div is clicked call `reveal` function for the current x and y\n* define internal function reveal that:\n  - get div at x and y using data-x and data-y attributes\n  - if the div is already revealed return\n  - set the div content to the value of the cell and add class `.visited` to the div\n  - if the div has am integer value smaller than 0 set the div content to `\ud83d\udca3` and call `alert` with the message `Game Over` and the title `\ud83d\udca3 minesweeper`\n  - else decrease the score by 1 and update the score div content to `Discovered: ${score}`\n  - if the div has an integer value of 0 call `reveal` for all the neighboring cells\n* call `os.gui.createWindow` with the following parameters: `'\ud83d\udca3 minesweeper'`, created root DOM element, `250`, `300` \n### Response:\n", "output": "Here is how you can implement this in JavaScript:\n\n```javascript\n(function() {\n    window.os = window.os || {};\n    window.os.apps = window.os.apps || {};\n    \n    window.os.apps.minesweeper = function() {\n        const root = document.createElement('div');\n        root.className = 'gmroot';\n        \n        const matrix = Array(8).fill().map(() => Array(8).fill(0));\n        const bombCoords = [];\n        for(let i = 0; i < 10; i++) {\n            let x, y;\n            do {\n                x = Math.floor(Math.random() * 8);\n                y = Math.floor(Math.random() * 8);\n            } while(bombCoords.find(coord => coord[0] === x && coord[1] === y));\n            bombCoords.push([x, y]);\n            matrix[x][y] = -100;\n            for(let dx = -1; dx <= 1; dx++) {\n                for(let dy = -1; dy <= 1; dy++) {\n                    if(x + dx >= 0 && x + dx < 8 && y + dy >= 0 && y + dy < 8) {\n                        matrix[x + dx][y + dy]++;\n                    }\n                }\n            }\n        }\n        \n        let score = 64;\n        const scoreDiv = document.createElement('div');\n        scoreDiv.className = 'score';\n        scoreDiv.textContent = `Discovered: ${score}`;\n        root.appendChild(scoreDiv);\n        \n        for(let x = 0; x < 8; x++) {\n            const rowDiv = document.createElement('div');\n            rowDiv.className = 'row';\n            for(let y = 0; y < 8; y++) {\n                const cellDiv = document.createElement('div');\n                cellDiv.className = 'cell';\n                cellDiv.textContent = ' ';\n                cellDiv.dataset.x = x;\n                cellDiv.dataset.y = y;\n                cellDiv.addEventListener('click', () => reveal(x, y));\n                rowDiv.appendChild(cellDiv);\n            }\n            root.appendChild(rowDiv);\n        }\n        \n        window.os.gui.createWindow('\ud83d\udca3 minesweeper', root, 250, 300);\n        \n        function reveal(x, y) {\n            const cellDiv = document.querySelector(`div[data-x=\"${x}\"][data-y=\"${y}\"]`);\n            if(cellDiv.classList.contains('visited')) {\n                return;\n            }\n            cellDiv.classList.add('visited');\n            const value = matrix[x][y];\n            if(value < 0) {\n                cellDiv.textContent = '\ud83d\udca3';\n                alert('Game Over');\n            } else {\n                cellDiv.textContent = value;\n                score--;\n                scoreDiv.textContent = `Discovered: ${score}`;\n                if(value === 0) {\n                    for(let dx = -1; dx <= 1; dx++) {\n                        for(let dy = -1; dy <= 1; dy++) {\n                            if(x + dx >= 0 && x + dx < 8 && y + dy >= 0 && y + dy < 8) {\n                                reveal(x + dx, y + dy);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n})();\n\n```"}