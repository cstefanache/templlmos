{"compiled_instruction": "Generate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called `titleBar` on the `window.os.gui` object having the following functionality:\n- create a root DOM element with the class `.titleBar`\n- add to the root DOM element a `span` containing the title parameter\n- add to the root DOM element a `button` with the text `x`\n- when the button is clicked then the DOM element passed as the second parameter should be removed from the body\n- when root DOM element is dragged then move the DOM element passed as the second parameter\n- return the root DOM element \n### Response:\n", "output": "Here is an example of how you can implement this in JavaScript:\n\n```javascript\n(function() {\n    window.os = window.os || {};\n    window.os.gui = window.os.gui || {};\n    window.os.gui.titleBar = function(title, targetElement) {\n        // Create root DOM element\n        var titleBar = document.createElement('div');\n        titleBar.className = 'titleBar';\n        \n        // Add title to span and append to titleBar\n        var titleSpan = document.createElement('span');\n        titleSpan.textContent = title;\n        titleBar.appendChild(titleSpan);\n        \n        // Add button to titleBar\n        var closeButton = document.createElement('button');\n        closeButton.textContent = 'x';\n        closeButton.addEventListener('click', function() {\n            document.body.removeChild(targetElement);\n        });\n        titleBar.appendChild(closeButton);\n        \n        // Add drag and drop functionality to titleBar\n        var dragging = false;\n        var startX;\n        var startY;\n        var offsetX;\n        var offsetY;\n        \n        titleBar.addEventListener('mousedown', function(e) {\n            dragging = true;\n            startX = e.clientX;\n            startY = e.clientY;\n            offsetX = targetElement.offsetLeft;\n            offsetY = targetElement.offsetTop;\n        });\n        \n        titleBar.addEventListener('mouseup', function() {\n            dragging = false;\n        });\n        \n        titleBar.addEventListener('mousemove', function(e) {\n            if (dragging) {\n                var x = e.clientX - startX;\n                var y = e.clientY - startY;\n                targetElement.style.left = (offsetX + x) + 'px';\n                targetElement.style.top = (offsetY + y) + 'px';\n            }\n        });\n        \n        return titleBar;\n    };\n})();\n\n```"}