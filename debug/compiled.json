{
    "head": {
        "_children_": [
            "<style id='osbase_general-styles'>\nbody {\n    background-color: #2E393D;\n}\n\n</style>",
            "<script id='osbase_global-objects'>\n(() => {\nwindow.os = {};\n\n\n})()\n</script>",
            "<script id='osbase_filesystem'>\n(() => {\nif (!window.os) {\n    window.os = {};\n}\nif (!window.os.fs) {\n    window.os.fs = {\n        filesystem: {},\n        sync: function () {\n            window.localStorage.setItem('filesystem', JSON.stringify(this.filesystem));\n        },\n        readPath: function (path) {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let parts = path.split('/');\n            let obj = this.filesystem;\n            for (let part of parts) {\n                if (obj[part] === undefined) {\n                    return undefined;\n                } else {\n                    obj = obj[part];\n                }\n            }\n            return obj;\n        },\n        write: function (path, content) {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let parts = path.split('/');\n            let obj = this.filesystem;\n            for (let i = 0; i < parts.length - 1; i++) {\n                if (obj[parts[i]] === undefined) {\n                    obj[parts[i]] = {};\n                }\n                obj = obj[parts[i]];\n            }\n            obj[parts[parts.length - 1]] = content;\n            this.sync();\n        },\n        ls: function (path = '') {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let obj = this.filesystem;\n            if (path !== '') {\n                let parts = path.split('/');\n                for (let part of parts) {\n                    if (obj[part] === undefined) {\n                        return undefined;\n                    } else {\n                        obj = obj[part];\n                    }\n                }\n            }\n            return Object.keys(obj);\n        },\n        mkdir: function (path, dirName) {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let parts = path.split('/');\n            let obj = this.filesystem;\n            for (let i = 0; i < parts.length - 1; i++) {\n                if (obj[parts[i]] === undefined) {\n                    obj[parts[i]] = {};\n                }\n                obj = obj[parts[i]];\n            }\n            obj[dirName] = {};\n            this.sync();\n        },\n        rm: function (path) {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let parts = path.split('/');\n            let obj = this.filesystem;\n            let parent = obj;\n            for (let i = 0; i < parts.length - 1; i++) {\n                if (obj[parts[i]] === undefined) {\n                    return;\n                } else {\n                    parent = obj;\n                    obj = obj[parts[i]];\n                }\n            }\n            delete parent[parts[parts.length - 1]];\n            this.sync();\n        },\n        isFile: function (path) {\n            if (path[0] === '/') {\n                path = path.substring(1);\n            }\n            let parts = path.split('/');\n            let obj = this.filesystem;\n            for (let part of parts) {\n                if (obj[part] === undefined || typeof obj[part] !== 'string') {\n                    return false;\n                } else {\n                    obj = obj[part];\n                }\n            }\n            return true;\n        }\n    };\n}\n\n\n})()\n</script>",
            "<style id='gui_gui-styles'>\n.titleBar {\n    background-color: orange;\n    border-bottom: 1px solid black;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-family: monospace;\n    font-size: small;\n    padding: 5px;\n    user-select: none; /* This will prevent text selection */\n}\n\n/* This will apply styles to buttons inside the title bar */\n.titleBar button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 6;\n    padding: 0; /* This will remove default button padding */\n}\n\n.window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    background-color: white;\n    padding: 1px;\n    border: 2px solid black;\n    border-radius: 4px;\n}\n\n.contentPlaceholder {\n    flex-grow: 1;\n    overflow: auto;\n    padding: 5px;\n}\n\n.toolbarPlaceholder {\n    border-bottom: 1px solid black;\n}\n\n.statusPlaceholder {\n    border-top: 1px solid black;\n    font-family: monospace;\n    font-size: small;\n}\n\n.resizeHandle {\n    width: 10px;\n    height: 10px;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    cursor: se-resize;\n    background-color: #000; /* Change this to your desired handle color */\n}\n\n</style>",
            "<script id='gui_gui-global-objects'>\n(() => {\nif (typeof window.os === 'undefined') {\n    window.os = {};\n}\n\nwindow.os.gui = {};\n\n\n})()\n</script>",
            "<script id='gui_draggable'>\n(() => {\n// Assuming window.os is already defined and has a gui property\nif (!window.os) {\n    window.os = {};\n}\nif (!window.os.gui) {\n    window.os.gui = {};\n}\n\n// Define makeDraggable function\nwindow.os.gui.makeDraggable = function (root, dragHandle) {\n    let offsetX = 0;\n    let offsetY = 0;\n    let mouseX = 0;\n    let mouseY = 0;\n    \n    const handleMouseDown = function (e) {\n        e = e || window.event;\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n        offsetX = root.offsetLeft - mouseX;\n        offsetY = root.offsetTop - mouseY;\n        \n        document.onmouseup = function () {\n            document.onmousemove = null;\n            document.onmouseup = null;\n        };\n        \n        document.onmousemove = function (e) {\n            e = e || window.event;\n            mouseX = e.clientX;\n            mouseY = e.clientY;\n            root.style.left = (mouseX + offsetX) + 'px';\n            root.style.top = (mouseY + offsetY) + 'px';\n        };\n    };\n    \n    dragHandle.onmousedown = handleMouseDown;\n};\n\n// Assuming window.os exists and has a gui property\nif (!window.os) {\n    window.os = {};\n}\nif (!window.os.gui) {\n    window.os.gui = {};\n}\n\n// Define makeResizable function\nwindow.os.gui.makeResizable = function(root, resizeHandle) {\n    let startX;\n    let startY;\n    let startWidth = root.offsetWidth;\n    let startHeight = root.offsetHeight;\n    \n    // Handle mousedown event to start resizing\n    resizeHandle.addEventListener('mousedown', function(e) {\n        e.preventDefault();\n        startX = e.clientX;\n        startY = e.clientY;\n        \n        document.addEventListener('mousemove', handleMouseMove);\n        document.addEventListener('mouseup', handleMouseUp);\n    });\n    \n    // Handle mousemove event to resize element\n    function handleMouseMove(e) {\n        let width = startWidth + e.clientX - startX;\n        let height = startHeight + e.clientY - startY;\n        \n        root.style.width = width + 'px';\n        root.style.height = height + 'px';\n    }\n    \n    // Handle mouseup event to stop resizing and update starting width and height\n    function handleMouseUp() {\n        startWidth = root.offsetWidth;\n        startHeight = root.offsetHeight;\n        \n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n    }\n};\n\nif (!window.os || !window.os.gui) {\n    window.os = window.os || {};\n    window.os.gui = window.os.gui || {};\n}\n\nwindow.os.gui.bringToFront = function (rootDomNode) {\n    // Internal function to bring other nodes to front\n    var bringOthersToFront = function () {\n        // Get all nodes with same class as rootDomNode\n        var nodes = document.getElementsByClassName(rootDomNode.className);\n        // Iterate through them and set z-index to 0\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].style.zIndex = 0;\n        }\n        // Set z-index of rootDomNode to 1\n        rootDomNode.style.zIndex = 1;\n    }\n    \n    // Add mousedown event listener to rootDomNode\n    rootDomNode.addEventListener('mousedown', bringOthersToFront);\n}\n\n\n})()\n</script>",
            "<script id='gui_titleBar'>\n(() => {\nif (!window.os) window.os = {};\nif (!window.os.gui) window.os.gui = {};\n\nwindow.os.gui.titleBar = function(parentElement, title) {\n    // Create root DOM element with class .titleBar\n    var root = document.createElement('div');\n    root.className = 'titleBar';\n    \n    // Add span containing title to root DOM element\n    var span = document.createElement('span');\n    span.textContent = title;\n    root.appendChild(span);\n    \n    // Add button with text '\u274c' to root DOM element\n    var button = document.createElement('button');\n    button.textContent = '\u274c';\n    button.addEventListener('click', function() {\n        // When button is clicked, remove parentElement from DOM\n        var parent = parentElement.parentNode;\n        if(parent){\n            parent.removeChild(parentElement);\n        }\n    });\n    root.appendChild(button);\n    \n    // Append root DOM element to parentElement\n    parentElement.appendChild(root);\n};\n\n\n})()\n</script>",
            "<script id='gui_window'>\n(() => {\n// Check if window.os and window.os.gui exist, create them if not\nif (!window.os) {\n    window.os = {};\n}\nif (!window.os.gui) {\n    window.os.gui = {};\n}\n\n// Define createWindow function\nwindow.os.gui.createWindow = function (emoji = '\ud83d\udda5\ufe0f', title = 'New Window', content = null, width = 400, height = 300) {\n    // Create root DOM element with class .window and add it to document body\n    const root = document.createElement('div');\n    root.classList.add('window');\n    document.body.appendChild(root);\n    \n    // Call bringToFront on root element\n    window.os.gui.bringToFront(root);\n    \n    // Add and empty div with class titlePlaceholder to root DOM element\n    const titlePlaceholder = document.createElement('div');\n    titlePlaceholder.classList.add('titlePlaceholder');\n    root.appendChild(titlePlaceholder);\n    \n    // Add and empty div with class toolbarPlaceholder to root DOM element\n    const toolbarPlaceholder = document.createElement('div');\n    toolbarPlaceholder.classList.add('toolbarPlaceholder');\n    root.appendChild(toolbarPlaceholder);\n    \n    // Add and empty div with class contentPlaceholder to root DOM element and append content parameter to it\n    const contentPlaceholder = document.createElement('div');\n    contentPlaceholder.classList.add('contentPlaceholder');\n    root.appendChild(contentPlaceholder);\n    if (content !== null) {\n        contentPlaceholder.appendChild(content);\n    }\n    \n    // Add and empty div with class statusPlaceholder to root DOM element\n    const statusPlaceholder = document.createElement('div');\n    statusPlaceholder.classList.add('statusPlaceholder');\n    root.appendChild(statusPlaceholder);\n    \n    // Add resize handle to root DOM element with class resizeHandle\n    const resizeHandle = document.createElement('div');\n    resizeHandle.classList.add('resizeHandle');\n    root.appendChild(resizeHandle);\n    \n    // Add titleBar to titlePlaceholder having text emoji + title\n    window.os.gui.titleBar(titlePlaceholder, emoji + ' ' + title);\n    \n    // Call makeDraggable on root element by the titlePlaceholder element\n    window.os.gui.makeDraggable(root, titlePlaceholder);\n    \n    // Make root element resizable by resizeHandle element\n    window.os.gui.makeResizable(root, resizeHandle);\n    \n    // Set default width and height of root element\n    root.style.width = width + 'px';\n    root.style.height = height + 'px';\n    \n    // Return null\n    return null;\n}\n\n\n})()\n</script>"
        ]
    },
    "body": {
        "_children_": [
            "<script id='gui_gui-tests'>\n(() => {\n// Create a new div and set its properties\nlet div = document.createElement('div');\ndiv.style.position = 'absolute';\ndiv.style.width = '100px';\ndiv.style.height = '100px';\ndiv.style.backgroundColor = 'red';\ndocument.body.appendChild(div);\n\n// Create another div and set its properties and append it to the first div\nlet div2 = document.createElement('div');\ndiv2.style.position = 'relative';\ndiv2.style.width = '100%';\ndiv2.style.height = '20px';\ndiv2.style.backgroundColor = 'blue';\ndiv.appendChild(div2);\n\n// Create another div and set its properties and append it to the first div\nlet div3 = document.createElement('div');\ndiv3.style.position = 'absolute';\ndiv3.style.right = '0';\ndiv3.style.bottom = '0';\ndiv3.style.width = '10px';\ndiv3.style.height = '10px';\ndiv3.style.backgroundColor = 'green';\ndiv.appendChild(div3);\n\n// Make the first div draggable using the second div as the drag handle\nif (!window.os || !window.os.gui || !window.os.gui.makeDraggable) {\n    window.os = window.os || {};\n    window.os.gui = window.os.gui || {};\n    window.os.gui.makeDraggable = (function() {\n        var startX, startY, startLeft, startTop;\n        return function(root, dragHandle) {\n            var rect = root.getBoundingClientRect();\n            startLeft = rect.left;\n            startTop = rect.top;\n            dragHandle.addEventListener('mousedown', function(e) {\n                startX = e.clientX;\n                startY = e.clientY;\n                document.addEventListener('mousemove', move);\n                document.addEventListener('mouseup', up);\n            });\n            function move(e) {\n                var left = startLeft + e.clientX - startX;\n                var top = startTop + e.clientY - startY;\n                root.style.left = left + 'px';\n                root.style.top = top + 'px';\n            }\n            function up() {\n                document.removeEventListener('mousemove', move);\n                document.removeEventListener('mouseup', up);\n            }\n        };\n    })();\n}\nwindow.os.gui.makeDraggable(div, div2);\n\n// Make the first div resizable using the third div as the resize handle\nif (!window.os || !window.os.gui || !window.os.gui.makeResizable) {\n    window.os = window.os || {};\n    window.os.gui = window.os.gui || {};\n    window.os.gui.makeResizable = (function() {\n        var startWidth, startHeight;\n        return function(root, resizeHandle) {\n            var rect = root.getBoundingClientRect();\n            startWidth = rect.width;\n            startHeight = rect.height;\n            resizeHandle.addEventListener('mousedown', function(e) {\n                document.addEventListener('mousemove', move);\n                document.addEventListener('mouseup', up);\n            });\n            function move(e) {\n                var width = startWidth + e.clientX - resizeHandle.getBoundingClientRect().left;\n                var height = startHeight + e.clientY - resizeHandle.getBoundingClientRect().top;\n                root.style.width = width + 'px';\n                root.style.height = height + 'px';\n            }\n            function up() {\n                document.removeEventListener('mousemove', move);\n                document.removeEventListener('mouseup', up);\n            }\n        };\n    })();\n}\nwindow.os.gui.makeResizable(div, div3);\n\n\n})()\n</script>",
            "<script id='gui_window-tests'>\n(() => {\n// Create first window\nlet div1 = document.createElement('div');\ndiv1.innerHTML = 'hello world 1';\nlet win1 = window.os.gui.createWindow('\ud83d\ude03', 'My Window', div1);\n\n// Create second window\nlet div2 = document.createElement('div');\ndiv2.innerHTML = 'hello world 2';\nlet win2 = window.os.gui.createWindow('\ud83d\udc84', 'My Window 2', div2);\n\n\n})()\n</script>"
        ]
    },
    "_children_": []
}