<html>
 <head>
  <style id="osbase_general-styles">
   body {
    background-color: #2E393D;
}
  </style>
  <script id="osbase_global-objects">
   (() => {
window.os = {};


})()
  </script>
  <script id="osbase_filesystem">
   (() => {
if (!window.os) {
    window.os = {};
}
if (!window.os.fs) {
    window.os.fs = {
        filesystem: {},
        sync: function () {
            window.localStorage.setItem('filesystem', JSON.stringify(this.filesystem));
        },
        readPath: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let part of parts) {
                if (obj[part] === undefined) {
                    return undefined;
                } else {
                    obj = obj[part];
                }
            }
            return obj;
        },
        write: function (path, content) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    obj[parts[i]] = {};
                }
                obj = obj[parts[i]];
            }
            obj[parts[parts.length - 1]] = content;
            this.sync();
        },
        ls: function (path = '') {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let obj = this.filesystem;
            if (path !== '') {
                let parts = path.split('/');
                for (let part of parts) {
                    if (obj[part] === undefined) {
                        return undefined;
                    } else {
                        obj = obj[part];
                    }
                }
            }
            return Object.keys(obj);
        },
        mkdir: function (path, dirName) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    obj[parts[i]] = {};
                }
                obj = obj[parts[i]];
            }
            obj[dirName] = {};
            this.sync();
        },
        rm: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            let parent = obj;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    return;
                } else {
                    parent = obj;
                    obj = obj[parts[i]];
                }
            }
            delete parent[parts[parts.length - 1]];
            this.sync();
        },
        isFile: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let part of parts) {
                if (obj[part] === undefined || typeof obj[part] !== 'string') {
                    return false;
                } else {
                    obj = obj[part];
                }
            }
            return true;
        }
    };
}


})()
  </script>
 </head>
 <body>
  <script id="osbase_test">
   (() => {
// Define the path where you want to write the content
let path = 'test/a/test.txt';
// Define the content you want to write
let content = 'hello world';
// Use the write function to write content at the specified path
window.os.fs.write(path, content);


})()
  </script>
 </body>
</html>
