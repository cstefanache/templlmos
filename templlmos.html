
<html>
<head>
<style>
body {
    background-color: #2E393D;
}

.desktop {
    position: fixed;
    width: 100%;
    height: 100%;
}



.titleBar {
    background-color: orange;
    border-bottom: 1px solid black;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: monospace;
    font-size: small;
    padding: 5px;
}

.titleBar button {
    border: 1px solid black;
    font-family: monospace;
    font-size: small;
    border-radius: 2px;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10+ */
    user-select: none; /* Standard syntax */
}



.windowComponent {
    position: absolute;
    background-color: #fff;
    padding: 1px;
    border: 2px solid #000;
    border-radius: 4px;
}

.contentPlaceholder {
    padding: 5px;
}



.app {
    width: 64px;
    height: 64px;
    text-align: center;
    margin: 5px;
    cursor: pointer;
}

.icon {
    display: block;
    font-size: 30px;
}

.app-name {
    display: block;
    font-size: 8px;
    background-color: black;
    font-family: monospace;
    color: white;
    padding: 5px;
}



.minesweeper button {
    font-family: 'Courier New', Courier, monospace;
}


</style>
<script>
function addDesktop(name, char, func) {
  // Create root div element
  let root = document.createElement('div');
  root.className = 'app';
  // Append character to root element
  let icon = document.createElement('div');
  icon.className = 'icon';
  icon.textContent = char;
  root.appendChild(icon);
  // Append span to root element
  let appName = document.createElement('span');
  appName.className = 'app-name';
  appName.textContent = name;
  root.appendChild(appName);
  // Append root to .desktop element
  let desktop = document.querySelector('.desktop');
  desktop.appendChild(root);
  // Add click event listener to execute function
  root.addEventListener('click', func);
}



function titleBar(title, domElement) {
    // Create root DOM element with class 'titleBar'
    let root = document.createElement('div');
    root.classList.add('titleBar');
    
    // Add span containing title parameter to root
    let span = document.createElement('span');
    span.textContent = title;
    root.appendChild(span);
    
    // Add button with text 'x' to root
    let button = document.createElement('button');
    button.textContent = 'x';
    button.addEventListener('click', () => document.body.removeChild(domElement));
    root.appendChild(button);
    
    // Add drag event listener to root to move domElement
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;
    
    root.addEventListener('mousedown', (e) => {
        isDragging = true;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
    });
    
    document.addEventListener('mousemove', (e) => {
        if (isDragging) {
            let x = e.clientX - offsetX;
            let y = e.clientY - offsetY;
            domElement.style.transform = `translate3d(${x}px, ${y}px, 0)`;
        }
    });
    
    document.addEventListener('mouseup', () => {
        isDragging = false;
    });
    
    return root;
}



function windowComponent(title, content, width = 400, height = 300) {
    // Creates a DOM element with the class `windowComponent` with the width and height passed to parameters
    let root = document.createElement('div');
    root.className = 'windowComponent';
    root.style.width = width + 'px';
    root.style.height = height + 'px';
    
    // Creates placeholders for the title and content
    let titlePlaceholder = document.createElement('div');
    titlePlaceholder.className = 'titlePlaceholder';
    let contentPlaceholder = document.createElement('div');
    contentPlaceholder.className = 'contentPlaceholder';
    
    // Appends the placeholders to the root element
    root.appendChild(titlePlaceholder);
    root.appendChild(contentPlaceholder);
    
    // Defines the title bar and appends it to the title placeholder
    let tb = titleBar(title, root);
    titlePlaceholder.appendChild(tb);
    
    // Appends the content as a child to the content placeholder
    contentPlaceholder.appendChild(content);
    
    // Appends the root element to the document body
    document.body.appendChild(root);
}


</script>
</head>
<body>
<script>
let desktopElement = document.createElement('div');
desktopElement.className = 'desktop';
document.body.appendChild(desktopElement);



function minesweeper() {
    // create root div
    const root = document.createElement('div');
    root.classList.add('minesweeper');
    document.body.appendChild(root);

    // create 8x8 matrix and fill it with 0s
    const matrix = Array(8).fill().map(() => Array(8).fill(0));

    // pick 3 random cells and set their value to 'x'
    const xCells = [];
    while (xCells.length < 3) {
        const x = Math.floor(Math.random() * 8);
        const y = Math.floor(Math.random() * 8);
        if (!xCells.some(cell => cell[0] === x && cell[1] === y)) {
            xCells.push([x, y]);
            matrix[x][y] = 'x';
        }
    }

    // set neighboring cells to number of 'x' cells around them
    for (let i = 0; i < 8; i++) {
        for (let j = 0; j < 8; j++) {
            if (matrix[i][j] === 'x') {
                for (let dx = -1; dx <= 1; dx++) {
                    for (let dy = -1; dy <= 1; dy++) {
                        const nx = i + dx;
                        const ny = j + dy;
                        if (nx >= 0 && nx < 8 && ny >= 0 && ny < 8 && matrix[nx][ny] !== 'x') {
                            matrix[nx][ny]++;
                        }
                    }
                }
            }
        }
    }

    // create cells and add them to the DOM
    for (let i = 0; i < 8; i++) {
        const row = document.createElement('div');
        for (let j = 0; j < 8; j++) {
            const cell = document.createElement('button');
            cell.classList.add('cell');
            cell.textContent = '.';
            cell.addEventListener('click', () => {
                if (matrix[i][j] === 'x') {
                    alert('Game Over');
                } else {
                    cell.textContent = matrix[i][j];
                }
            });
            row.appendChild(cell);
        }
        root.appendChild(row);
    }

    // call windowComponent
    windowComponent('Minesweeper', root, 202, 220);
}



addDesktop("minesweeper", String.fromCodePoint(0x0001F4A3), minesweeper);


</script>
</body>
</html>