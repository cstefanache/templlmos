
<html>
<head>
<style>
body {
    background-color: #2E393D;
}

.desktop {
    position: fixed;
    width: 100%;
    height: 100%;
}



.titleBar {
    background-color: orange;
    border-bottom: 1px solid black;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: monospace;
    font-size: small;
    padding: 5px;
}

.titleBar button {
    border: 1px solid black;
    font-family: monospace;
    font-size: small;
    border-radius: 2px;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10+ */
    user-select: none; /* Standard syntax */
}



.windowComponent {
    position: absolute;
    background-color: #fff;
    padding: 1px;
    border: 2px solid #000;
    border-radius: 4px;
}

.contentPlaceholder {
    padding: 5px;
}



.app {
    width: 64px;
    height: 64px;
    text-align: center;
    margin: 5px;
    cursor: pointer;
}

.icon {
    display: block;
    font-size: 30px;
}

.app-name {
    display: block;
    font-size: 8px;
    background-color: black;
    font-family: monospace;
    color: white;
    padding: 5px;
}



.gmroot button {
    font-family: 'Courier New', Courier, monospace;
}


</style>
<script>
function addDesktop(name, char, func) {
  // Create root div element
  let root = document.createElement('div');
  root.className = 'app';
  // Append character to root element
  let icon = document.createElement('div');
  icon.className = 'icon';
  icon.textContent = char;
  root.appendChild(icon);
  // Append span to root element
  let appName = document.createElement('span');
  appName.className = 'app-name';
  appName.textContent = name;
  root.appendChild(appName);
  // Append root to .desktop element
  let desktop = document.querySelector('.desktop');
  desktop.appendChild(root);
  // Add click event listener to execute function
  root.addEventListener('click', func);
}



function titleBar(title, domElement) {
    // Create root DOM element with class 'titleBar'
    let root = document.createElement('div');
    root.classList.add('titleBar');
    
    // Add span containing title parameter to root
    let span = document.createElement('span');
    span.textContent = title;
    root.appendChild(span);
    
    // Add button with text 'x' to root
    let button = document.createElement('button');
    button.textContent = 'x';
    button.addEventListener('click', () => document.body.removeChild(domElement));
    root.appendChild(button);
    
    // Add drag event listener to root to move domElement
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;
    
    root.addEventListener('mousedown', (e) => {
        isDragging = true;
        offsetX = e.offsetX;
        offsetY = e.offsetY;
    });
    
    document.addEventListener('mousemove', (e) => {
        if (isDragging) {
            let x = e.clientX - offsetX;
            let y = e.clientY - offsetY;
            domElement.style.transform = `translate3d(${x}px, ${y}px, 0)`;
        }
    });
    
    document.addEventListener('mouseup', () => {
        isDragging = false;
    });
    
    return root;
}



function windowComponent(title, content, width = 400, height = 300) {
    // Creates a DOM element with the class `windowComponent` with the width and height passed to parameters
    let root = document.createElement('div');
    root.className = 'windowComponent';
    root.style.width = width + 'px';
    root.style.height = height + 'px';
    
    // Creates placeholders for the title and content
    let titlePlaceholder = document.createElement('div');
    titlePlaceholder.className = 'titlePlaceholder';
    let contentPlaceholder = document.createElement('div');
    contentPlaceholder.className = 'contentPlaceholder';
    
    // Appends the placeholders to the root element
    root.appendChild(titlePlaceholder);
    root.appendChild(contentPlaceholder);
    
    // Defines the title bar and appends it to the title placeholder
    let tb = titleBar(title, root);
    titlePlaceholder.appendChild(tb);
    
    // Appends the content as a child to the content placeholder
    contentPlaceholder.appendChild(content);
    
    // Appends the root element to the document body
    document.body.appendChild(root);
}


</script>
</head>
<body>
<script>
let desktop = document.createElement('div');
desktop.className = 'desktop';
document.body.appendChild(desktop);



function minesweeper() {
    // create root div
    const gmRoot = document.createElement('div');
    gmRoot.classList.add('gmroot');
    document.body.appendChild(gmRoot);
    
    // create 8x8 matrix and initialize to 0
    let matrix = Array(8).fill().map(() => Array(8).fill(0));
    
    // pick 3 random cells and set their value to 'x'
    let mines = [];
    while(mines.length < 3) {
        let x = Math.floor(Math.random() * 8);
        let y = Math.floor(Math.random() * 8);
        if(!mines.find(mine => mine[0] === x && mine[1] === y)) {
            matrix[x][y] = 'x';
            mines.push([x, y]);
        }
    }
    
    // set neighboring cells to number of 'x' cells around them
    for(let i = 0; i < 8; i++) {
        for(let j = 0; j < 8; j++) {
            if(matrix[i][j] === 'x') {
                for(let x = i - 1; x <= i + 1; x++) {
                    for(let y = j - 1; y <= j + 1; y++) {
                        if(x >= 0 && x < 8 && y >= 0 && y < 8 && !(x === i && y === j)) {
                            matrix[x][y] = (matrix[x][y] === 'x' ? 0 : matrix[x][y] + 1);
                        }
                    }
                }
            }
        }
    }
    
    // create matrix visualization and add to gmRoot
    for(let i = 0; i < 8; i++) {
        let row = document.createElement('div');
        for(let j = 0; j < 8; j++) {
            let cell = document.createElement('button');
            cell.classList.add('cell');
            cell.textContent = '.';
            cell.addEventListener('click', () => {
                if(matrix[i][j] === 'x') {
                    alert('Game Over');
                } else {
                    cell.textContent = matrix[i][j];
                }
            });
            row.appendChild(cell);
        }
        gmRoot.appendChild(row);
    }
    
    // call windowComponent
    windowComponent('Minesweeper', gmRoot, 202, 220);
}



function tictactoe() {
    // Create root DOM element
    const gmRoot = document.createElement('div');
    gmRoot.classList.add('gmRoot');
    document.body.appendChild(gmRoot);
    
    // Store current player as 'x'
    let currentPlayer = 'x';
    
    // Create 3x3 grid of buttons
    for(let i = 0; i < 3; i++) {
        const row = document.createElement('div');
        row.classList.add('row');
        gmRoot.appendChild(row);
        
        for(let j = 0; j < 3; j++) {
            const cell = document.createElement('button');
            cell.classList.add('cell');
            cell.textContent = '.';
            cell.addEventListener('click', () => {
                cell.textContent = currentPlayer;
                currentPlayer = currentPlayer === 'x' ? 'o' : 'x';
            });
            row.appendChild(cell);
        }
    }
    
    // Call windowComponent function
    windowComponent('Tic Tac Toe', gmRoot, 202, 220);
}



addDesktop("minesweeper", String.fromCodePoint(0x0001F4A3), minesweeper);
addDesktop("tic-tac-toe", String.fromCodePoint(0x274C), tictactoe);


</script>
</body>
</html>