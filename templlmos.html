
<html>
<head>
<script>
const sources = {"sources": {"os": {"os-base.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a new \`os\` object on the window global object.\nAdd an empty \`apps\` object to the \`os\` object. \n### Response:\n\n----------------[ output ]----------------\nYou can create a new \`os\` object and add an empty \`apps\` object to it by using JavaScript like this:\n\n\`\`\`javascript\nwindow.os = {\n    apps: {}\n};\n\n\`\`\`", "filesystem.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that holds an empty object called \`filesystem\` that is loaded from local storage or initialized as empty.\nDefine the following methods under the global \`window.os\` object under \`fs\` key:\n* \`sync()\` - save the \`filesystem\` object to the local storage.\n* \`readPath(path)\` - returns the content of the entry in the \`filesystem\` object at the given path. path should be split by \`/\` and the method should traverse the \`filesystem\` object and return the value at path (allow undefined). if the path starts with \`/\` remove the leading \`/\`\n* \`write(path, content)\` - writes the content to an entry in the \`filesystem\` object at the given path and file name. in the end execute the \`sync\` method.\n* \`ls(path) - returns a list of entries in the \`filesystem\` object at the given path. if path is empty or not found, return the root entries. if the path starts with \`/\` remove the leading \`/\`\n* \`mkdir(path, dirName)\` - creates a new directory in the \`filesystem\` object at the given path and directory name. in the end execute the \`sync\` method.\n* \`rm(path)\` - removes the object at the given path and file name. in the end execute the \`sync\` method.\n* \`isFile(path)\` - returns true the entry at the given path is a string. \n### Response:\n\n----------------[ output ]----------------\nHere's how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    // Load filesystem from localStorage, if it exists, otherwise initialize it as an empty object\n    var filesystem = JSON.parse(localStorage.getItem('filesystem')) || {};\n    \n    // Define fs methods on window.os\n    window.os = window.os || {};\n    window.os.fs = {\n        sync: function() {\n            localStorage.setItem('filesystem', JSON.stringify(filesystem));\n        },\n        readPath: function(path) {\n            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists\n            var pathArray = path.split('/');\n            var current = filesystem;\n            for (var i = 0; i < pathArray.length; i++) {\n                if (current[pathArray[i]] === undefined) {\n                    return undefined;  // Path not found\n                } else {\n                    current = current[pathArray[i]];  // Traverse down the path\n                }\n            }\n            return current;  // Return content at path\n        },\n        write: function(path, content) {\n            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists\n            var pathArray = path.split('/');\n            var current = filesystem;\n            for (var i = 0; i < pathArray.length - 1; i++) {  // Do not traverse to last element, we will assign content there\n                if (current[pathArray[i]] === undefined) {\n                    current[pathArray[i]] = {};  // Create path if it does not exist\n                }\n                current = current[pathArray[i]];  // Traverse down the path\n            }\n            current[pathArray[pathArray.length - 1]] = content;  // Assign content to last element in path\n            this.sync();  // Save filesystem to localStorage\n        },\n        ls: function(path) {\n            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists\n            var current = filesystem;\n            if (path) {\n                var pathArray = path.split('/');\n                for (var i = 0; i < pathArray.length; i++) {\n                    if (current[pathArray[i]] === undefined) {\n                        return undefined;  // Path not found\n                    } else {\n                        current = current[pathArray[i]];  // Traverse down the path\n                    }\n                }\n            }\n            return Object.keys(current);  // Return entries at path\n        },\n        mkdir: function(path, dirName) {\n            this.write(path + '/' + dirName, {});  // Write an empty directory at path\n        },\n        rm: function(path) {\n            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists\n            var pathArray = path.split('/');\n            var current = filesystem;\n            for (var i = 0; i < pathArray.length - 1; i++) {  // Do not traverse to last element, we will remove it here\n                if (current[pathArray[i]] === undefined) {\n                    return;  // Path not found, do nothing\n                } else {\n                    current = current[pathArray[i]];  // Traverse down the path\n                }\n            }\n            delete current[pathArray[pathArray.length - 1]];  // Remove last element in path\n            this.sync();  // Save filesystem to localStorage\n        },\n        isFile: function(path) {\n            var content = this.readPath(path);\n            return typeof content === 'string';  // Return true if content at path is a string\n        }\n    };\n})();\n\n\`\`\`"}, "gui": {"title-bar-styles.style": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n css style for a .titleBar class to follow the following rules:\n1. orange background color, a black bottom border of 1px solid\n2. display of flex, a justify-content of space-between, an align-items of center\n3. monospaced black small text\n4. internal padding of 5px\n5. all buttons should have a black border and small monospaced text and a rounded border of 2px, flat look\n6. do not allow text selection \n### Response:\n\n----------------[ output ]----------------\nHere is the CSS code that you can use to achieve these styles:\n\n\`\`\`css\n.titleBar {\n    background-color: orange;\n    border-bottom: 1px solid black;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-family: monospace;\n    font-size: small;\n    padding: 5px;\n    user-select: none; /* This will prevent text selection */\n}\n\n/* This will apply styles to all buttons inside titleBar */\n.titleBar button {\n    border: 1px solid black;\n    font-family: monospace;\n    font-size: small;\n    border-radius: 2px; /* This will give rounded corners */\n}\n\n\`\`\`", "window-container-styles.style": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n css style for a .window class to follow the following rules:\n- white background color and a padding of 1px\n- a border of 2px solid black\n- a border-radius of 4px\n- absolute position\n- display of flex and flex-direction of column\n- inner .contentPlaceholder class should have a padding of 5px, flex-grow of 1 and overflow of auto\n- inner .toolbarPlaceholder class should have a border-bottom of 1px solid black\n- inner .statusPlaceholder class should have  a border-top of 1px solid black and a monospaced small text \n### Response:\n\n----------------[ output ]----------------\nSure, here is the CSS code that matches your requirements:\n\n\`\`\`css\n.window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    background-color: white;\n    padding: 1px;\n    border: 2px solid black;\n    border-radius: 4px;\n}\n\n.contentPlaceholder {\n    flex-grow: 1;\n    overflow: auto;\n    padding: 5px;\n}\n\n.toolbarPlaceholder {\n    border-bottom: 1px solid black;\n}\n\n.statusPlaceholder {\n    border-top: 1px solid black;\n    font-family: monospace;\n    font-size: small;\n}\n\n\`\`\`", "toolbar-styles.style": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n css style for a .toolbar class to follow the following rules:\n- a padding of 3px 5px\n- a margin-bottom of 2px\n- a display of flex\n- a justify-content of flex-start\ninner buttons have:\n - no border\n - cursor pointer\n - a white background and a light gray on hover \n### Response:\n\n----------------[ output ]----------------\nSure, here is the CSS code that you can use:\n\n\`\`\`css\n.toolbar {\n    padding: 3px 5px;\n    margin-bottom: 2px;\n    display: flex;\n    justify-content: flex-start;\n}\n\n.toolbar button {\n    border: none;\n    cursor: pointer;\n    background-color: white;\n}\n\n.toolbar button:hover {\n    background-color: lightgray;\n}\n\n\`\`\`", "gui-object.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Define \`gui\` empty object on the global \`window.os\` object \n### Response:\n\n----------------[ output ]----------------\nSure, here is a simple JavaScript snippet that defines an empty object named 'gui' within the 'window.os' object:\n\n\`\`\`javascript\nif (typeof window.os === \"undefined\") {\n    window.os = {};\n}\n\nwindow.os.gui = {};\n\n\`\`\`", "utils.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines an object \`utils\` on \`window.os.gui\` object providing the following functions:\n- setSizeAndCenter(root, width, height) - set the root DOM element size to width and height and center root DOM element on the screen \n### Response:\n\n----------------[ output ]----------------\nHere is how you can create such a self-executing function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    if (!window.os || !window.os.gui) {\n        window.os = window.os || {};\n        window.os.gui = window.os.gui || {};\n    }\n    \n    window.os.gui.utils = {\n        setSizeAndCenter: function (root, width, height) {\n            root.style.width = width + 'px';\n            root.style.height = height + 'px';\n            \n            root.style.position = 'absolute';\n            root.style.top = '50%';\n            root.style.left = '50%';\n            root.style.transform = 'translate(-50%, -50%)';\n        }\n    };\n})();\n\n\`\`\`", "title-bar.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called \`titleBar\` on the \`window.os.gui\` object having the following functionality:\n- create a root DOM element with the class \`.titleBar\`\n- add to the root DOM element a \`span\` containing the title parameter\n- add to the root DOM element a \`button\` with the text \`x\`\n- when the button is clicked then the DOM element passed as the second parameter should be removed from the body\n- when root DOM element is dragged then move the DOM element passed as the second parameter\n- return the root DOM element \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    window.os = window.os || {};\n    window.os.gui = window.os.gui || {};\n    window.os.gui.titleBar = function(title, targetElement) {\n        // Create root DOM element\n        var titleBar = document.createElement('div');\n        titleBar.className = 'titleBar';\n        \n        // Add title to span and append to titleBar\n        var titleSpan = document.createElement('span');\n        titleSpan.textContent = title;\n        titleBar.appendChild(titleSpan);\n        \n        // Add button to titleBar\n        var closeButton = document.createElement('button');\n        closeButton.textContent = 'x';\n        closeButton.addEventListener('click', function() {\n            document.body.removeChild(targetElement);\n        });\n        titleBar.appendChild(closeButton);\n        \n        // Add drag and drop functionality to titleBar\n        var dragging = false;\n        var startX;\n        var startY;\n        var offsetX;\n        var offsetY;\n        \n        titleBar.addEventListener('mousedown', function(e) {\n            dragging = true;\n            startX = e.clientX;\n            startY = e.clientY;\n            offsetX = targetElement.offsetLeft;\n            offsetY = targetElement.offsetTop;\n        });\n        \n        titleBar.addEventListener('mouseup', function() {\n            dragging = false;\n        });\n        \n        titleBar.addEventListener('mousemove', function(e) {\n            if (dragging) {\n                var x = e.clientX - startX;\n                var y = e.clientY - startY;\n                targetElement.style.left = (offsetX + x) + 'px';\n                targetElement.style.top = (offsetY + y) + 'px';\n            }\n        });\n        \n        return titleBar;\n    };\n})();\n\n\`\`\`", "window.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called \`createWindow\` on the \`window.os.gui\` object\nThe \`createWindow\` function takes four parameters: title, content (as DOM element) and width and height that are defaulting to 400 and 300, respectively if not passed and have the following functionality:\n- create a root DOM element with the class \`.window\`\n- call existing \`os.gui.utils.setSizeAndCenter\` with the root DOM element, width and height\n- add \`div\` placeholders for \`.titlePlaceholder\`, \`.toolbarPlaceholder\`, \`.contentPlaceholder\` and \`.statusPlaceholder\` to the root DOM element\n- execute function \`window.os.gui.titleBar\` with the title and the root DOM element as the second parameter and append the returned DOM element to the \`.titlePlaceholder\`\n- append the content parameter as dom child to the \`.contentPlaceholder\`\n- create an internal function \`bringToFront\` that make all \`.window\` have z-index: 1 and the current root DOM element have z-index: 2\n- when root DOM element is clicked call the \`bringToFront\` function\n- append the root dom element to document body\n- call bring to front after 20ms\n- return the root DOM element \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    if (!window.os) window.os = {};\n    if (!window.os.gui) window.os.gui = {};\n    if (!window.os.gui.utils) window.os.gui.utils = { setSizeAndCenter: setSizeAndCenter }; // Assuming this exists somewhere else in your code\n    \n    window.os.gui.createWindow = function(title = \"Default Title\", content = null, width = 400, height = 300) {\n        var root = document.createElement(\"div\");\n        root.className = \"window\";\n        \n        window.os.gui.utils.setSizeAndCenter(root, width, height);\n        \n        var titlePlaceholder = document.createElement(\"div\");\n        titlePlaceholder.className = \"titlePlaceholder\";\n        root.appendChild(titlePlaceholder);\n        \n        var toolbarPlaceholder = document.createElement(\"div\");\n        toolbarPlaceholder.className = \"toolbarPlaceholder\";\n        root.appendChild(toolbarPlaceholder);\n        \n        var contentPlaceholder = document.createElement(\"div\");\n        contentPlaceholder.className = \"contentPlaceholder\";\n        root.appendChild(contentPlaceholder);\n        \n        var statusPlaceholder = document.createElement(\"div\");\n        statusPlaceholder.className = \"statusPlaceholder\";\n        root.appendChild(statusPlaceholder);\n        \n        if(typeof window.os.gui.titleBar === 'function') {\n            var titleBar = window.os.gui.titleBar(title, root);\n            titlePlaceholder.appendChild(titleBar);\n        }\n        \n        if(content && content instanceof Node) {\n            contentPlaceholder.appendChild(content);\n        }\n        \n        var bringToFront = function() {\n            var windows = document.querySelectorAll(\".window\");\n            for(var i = 0; i < windows.length; i++) {\n                windows[i].style.zIndex = 1;\n            }\n            root.style.zIndex = 2;\n        }\n        \n        root.onclick = bringToFront;\n        \n        document.body.appendChild(root);\n        \n        setTimeout(bringToFront, 20);\n        \n        return root;\n    }\n})();\n\n\`\`\`", "window-utils.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines the following functions on \`window.os.gui\` object:\n- updateStatus(win, value) - update innerText of \`.statusPlaceholder\` of the win DOM element as parameter with the value parameter \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can create such a self-executing function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    // Check if window.os exists and is an object\n    if (typeof window.os === 'undefined' || typeof window.os !== 'object') {\n        window.os = {};\n    }\n    \n    // Check if window.os.gui exists and is an object\n    if (typeof window.os.gui === 'undefined' || typeof window.os.gui !== 'object') {\n        window.os.gui = {};\n    }\n    \n    // Define the updateStatus function\n    window.os.gui.updateStatus = function(win, value) {\n        var statusElement = win.querySelector('.statusPlaceholder');\n        if (statusElement !== null && statusElement !== undefined) {\n            statusElement.innerText = value;\n        } else {\n            console.error('Element with class .statusPlaceholder not found in provided win DOM element');\n        }\n    };\n})();\n\n\`\`\`", "toolbar.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called \`toolbar\` on the \`window.os.gui\` object\nThe \`toolbar\` receives a parameter rootElement as DOM element\n- create a root DOM element with the class \`.toolbar\`\n- append the root DOM element to the \`.toolbarPlaceholder\` from passed rootElement as parameter\n- return an object with the following functions:\n  - addButton(text, callback) - add a button to the root DOM element with the text parameter and call the callback when the button is clicked \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    if (!window.os) window.os = {};\n    if (!window.os.gui) window.os.gui = {};\n    \n    window.os.gui.toolbar = function(rootElement) {\n        var toolbar = document.createElement('div');\n        toolbar.className = 'toolbar';\n        \n        rootElement.querySelector('.toolbarPlaceholder').appendChild(toolbar);\n        \n        return {\n            addButton: function(text, callback) {\n                var button = document.createElement('button');\n                button.textContent = text;\n                button.addEventListener('click', callback);\n                toolbar.appendChild(button);\n            }\n        };\n    };\n})();\n\n\`\`\`", "prompt.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called \`createPrompt\` on the \`window.os.gui\` object\nThe \`prompt\` function takes two parameters: title and a callback:\n* creates a root dom element with the class \`editor\`\n* add a text input element to the root dom element full width\n* add a button element to the root dom element and set the text to \`OK\`\n* call \`os.gui.createWindow\` with the following parameters: \`title\` parameter, created root DOM element, \`300\`, \`100\` and save the result in a variable named \`win\`\n* when the button is clicked call the callback with the value of the input element and remove the win element from the body \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    if (!window.os) window.os = {};\n    if (!window.os.gui) window.os.gui = {};\n    \n    window.os.gui.createPrompt = function(title, callback) {\n        // create root dom element with class 'editor'\n        var root = document.createElement('div');\n        root.className = 'editor';\n        \n        // add text input element to root dom element full width\n        var input = document.createElement('input');\n        input.style.width = '100%';\n        root.appendChild(input);\n        \n        // add button element to root dom element and set text to 'OK'\n        var button = document.createElement('button');\n        button.textContent = 'OK';\n        root.appendChild(button);\n        \n        // call os.gui.createWindow with given parameters\n        var win = window.os.gui.createWindow(title, root, 300, 100);\n        \n        // when button is clicked, call callback with input value and remove win element from body\n        button.addEventListener('click', function() {\n            callback(input.value);\n            document.body.removeChild(win);\n        });\n    };\n})();\n\n\`\`\`"}, "desktop": {"look-and-feel.style": "\n----------------[ prompt ]----------------\nGenerate code only. Stop after the code is generated. Do not provide any explanations.\n### Instruction:\n Generate CSS to: \n - to apply #2E393D background for the body\n - all \`body > .icon > .app-name\` have a white color \n### Response:\n\n----------------[ output ]----------------\n\`\`\`css\nbody {\n    background-color: #2E393D;\n}\n\nbody > .icon > .app-name {\n    color: white;\n}\n\n\`\`\`", "desktop-icons.style": "\n----------------[ prompt ]----------------\nGenerate code only. Stop after the code is generated. Do not provide any explanations.\n### Instruction:\n css style the \`.icon\` class to match the following rules:\n1. 64px width, 64px min height, text-align center, margin of 5px, pointer cursor\n2. containing \`.emoji\` class should be a block, have a font-size of 30px and inline-block display, position relative\n3. containing \`.app-name\` class should be a block, have a font-size of 8px, monospaced font, black text, padding of 5px, allow word-wrap to break word \n### Response:\n\n----------------[ output ]----------------\nSure, here's how you can define these styles in CSS:\n\n\`\`\`css\n.icon {\n    width: 64px;\n    min-height: 64px;\n    text-align: center;\n    margin: 5px;\n    cursor: pointer;\n}\n\n.emoji {\n    display: inline-block;\n    font-size: 30px;\n    position: relative;\n}\n\n.app-name {\n    display: block;\n    font-size: 8px;\n    font-family: monospace;\n    color: black;\n    padding: 5px;\n    word-wrap: break-word;\n}\n\n\`\`\`", "custom-icons.style": "\n----------------[ prompt ]----------------\nGenerate code only. Stop after the code is generated. Do not provide any explanations.\n### Instruction:\n For the below classes add a :after pseudo-element with the provided content, positioned absolute bottom left, 16px font size\n- \`icon-script\` with content \`\\1F4DC\`\n- \`icon-style\` with content \`\\1F3A8\`\n- \`icon-html\` with content \`\\1F4C4\`\n- \`icon-txt\` with content \`\\1F4C4\` \n### Response:\n\n----------------[ output ]----------------\nSure, here are the CSS styles for each of these classes with the specified properties:\n\n\`\`\`css\n.icon-script::after {\n    content: \"\\1F4DC\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    font-size: 16px;\n}\n\n.icon-style::after {\n    content: \"\\1F3A8\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    font-size: 16px;\n}\n\n.icon-html::after {\n    content: \"\\1F4C4\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    font-size: 16px;\n}\n\n.icon-txt::after {\n    content: \"\\1F4C4\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    font-size: 16px;\n}\n\n\`\`\`", "os-icon.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Create a self executing function that defines a function called \`addIcon\` on the \`window.os.gui\` object\nThe \`addIcon\` function takes 3 arguments: \`name\`, \`icon\`, \`callback\` and \`container\`\nThe \`name\` argument is a string that represents the name of the icon\nThe \`icon\` argument is a string that represents the icon\nThe \`callback\` argument is a function that is called when the icon is clicked\nThe \`container\` argument represents the DOM element of the container where the icon should be appended\nThe created root element should have the class \`.icon\`, and should contain two child elements: \`.emoji\` and \`.app-name\`\nAppend to \`.emoji\` class list the concatenation between the \`icon-\` and the extension extracted from \`name\` if the name contains the dot character \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can create such a function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    if (!window.os) window.os = {};\n    if (!window.os.gui) window.os.gui = {};\n    \n    window.os.gui.addIcon = function(name, icon, callback, container) {\n        // create root element\n        var root = document.createElement('div');\n        root.classList.add('icon');\n        \n        // create emoji element\n        var emoji = document.createElement('div');\n        emoji.classList.add('emoji');\n        \n        // create app-name element\n        var appName = document.createElement('div');\n        appName.classList.add('app-name');\n        appName.textContent = name;\n        \n        // add icon to emoji element\n        emoji.textContent = icon;\n        \n        // add event listener to root element\n        root.addEventListener('click', callback);\n        \n        // add elements to root element\n        root.appendChild(emoji);\n        root.appendChild(appName);\n        \n        // add icon to container\n        container.appendChild(root);\n        \n        // add icon-* class to emoji element if name contains dot character\n        if (name.includes('.')) {\n            var extension = name.split('.').pop();\n            emoji.classList.add('icon-' + extension);\n        }\n    };\n})();\n\n\`\`\`"}, "browser": {"browser-styles.style": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework.\n### Instruction:\n Define \`.browser\` class having display flex and allow wrap \n### Response:\n\n----------------[ output ]----------------\nSure, you can define a CSS class named \`.browser\` with \`display: flex;\` and \`flex-wrap: wrap;\` in your CSS file like this:\n\n\`\`\`css\n.browser {\n    display: flex;\n    flex-wrap: wrap;\n}\n\n\`\`\`", "browser-app.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework. All the \`os\` functions are already defined on global scope.\n### Instruction:\n Create a self executing function that defines a function called \`browser\` on the \`window.os.apps\` object having the following functionality:\nThe \`browser\` function accepts one parameter \`path\` and have the following functionality:\n - creates a new root \`div\` element with the class \`browser\`\n - call \`os.gui.createWindow\` with the following parameters: \`Browser, created DOM element and store the returned value to constant \`win\`\n - call \`os.gui.toolbar(win)\` and store the returned value to constant \`toolbar\`\n - call \`toolbar.addButton ('\ud83d\udcc1', () => os.gui.createPrompt('Enter folder name', name => os.fs.mkdir(path, name); refresh())\`\n - call \`toolbar.addButton ('\ud83d\udcc4', () => os.gui.createPrompt('Enter folder name', name => os.fs.write(path+'/'+ name, \"\"); refresh())\`\n - call \`toolbar.addButton ('\ud83d\uddd1\ufe0f', () => os.fs.rm(path); updates path to remove the last iterm after \`/\` and refresh)\`\n - create an internal refresh function that:\n  * removes all the children of the root element\n  * call \`os.gui.updateStatus\` on \`win\` element to \`path\`\n  * store into \`files\` constant execution of \`os.fs.ls\`\n  * if lenght of path is bigger than 1 then call \`os.gui.addIcon\` with the exact following parameters: \`..\`, \`'\ud83d\udd19'\`, and a callback that updates path to remove the last iterm after \`/\` and refresh and root DOM element\n  * for each file in the \`files\` array, do the following:\n    * save to variable \`isFile\` the execution of \`os.fs.isFile\` with the parameter \`path + '/' + name\`\n    * create a callback function that calls if \`isFile\` call \`os.apps.editor\` or set path to \`path + '/' + name\` and call \`refresh()\`\n    * calls \`os.gui.addIcon\` with the exact following parameters: \`name\`, \`'\ud83d\udcc4'\` if isFile is true, \`'\ud83d\udcc1'\` otherwise, callback function and the created root DOM element \n### Response:\n\n----------------[ output ]----------------\nHere is your requested JavaScript code:\n\n\`\`\`javascript\n(function() {\n    window.os = window.os || {};\n    window.os.apps = window.os.apps || {};\n    \n    window.os.apps.browser = function(path) {\n        const root = document.createElement('div');\n        root.className = 'browser';\n        document.body.appendChild(root);\n        \n        const win = os.gui.createWindow('Browser', root);\n        const toolbar = os.gui.toolbar(win);\n        \n        toolbar.addButton('\ud83d\udcc1', () => {\n            os.gui.createPrompt('Enter folder name', name => {\n                os.fs.mkdir(path, name);\n                refresh();\n            });\n        });\n        \n        toolbar.addButton('\ud83d\udcc4', () => {\n            os.gui.createPrompt('Enter file name', name => {\n                os.fs.write(path + '/' + name, \"\");\n                refresh();\n            });\n        });\n        \n        toolbar.addButton('\ud83d\uddd1\ufe0f', () => {\n            os.fs.rm(path);\n            path = path.substring(0, path.lastIndexOf('/'));\n            refresh();\n        });\n        \n        const refresh = () => {\n            while (root.firstChild) {\n                root.removeChild(root.firstChild);\n            }\n            \n            os.gui.updateStatus(win, path);\n            \n            const files = os.fs.ls(path);\n            \n            if (path.length > 1) {\n                os.gui.addIcon('..', '\ud83d\udd19', () => {\n                    path = path.substring(0, path.lastIndexOf('/'));\n                    refresh();\n                }, root);\n            }\n            \n            files.forEach(name => {\n                const isFile = os.fs.isFile(path + '/' + name);\n                \n                const callback = isFile ? \n                    () => { os.apps.editor(path + '/' + name); refresh(); } : \n                    () => { path = path + '/' + name; refresh(); };\n                \n                os.gui.addIcon(name, isFile ? '\ud83d\udcc4' : '\ud83d\udcc1', callback, root);\n            });\n        };\n        \n        refresh();\n    };\n})();\n\n\`\`\`", "viwer-app.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework. All the \`os\` functions are already defined on global scope.\n### Instruction:\n Create a self executing function that defines a function called \`viewer\` on the \`window.os.apps\` object having the following functionality:\nThe \`viewer\` function accepts one parameter \`path\` and have the following functionality:\n - creates a new \`div\` element with the class \`viewer\`\n - call \`os.gui.createWindow\` with the following parameters: \`View: \`+ path, created DOM element\n - call \`os.fs.readPath\` with the parameter \`path\` and store it in a variable \`content\`\n - create a new \`pre\` element with the class \`content\` and set its innerHTML to \`content\`\n - append the \`pre\` element to the created DOM element \n### Response:\n\n----------------[ output ]----------------\nHere is the JavaScript code for your problem:\n\n\`\`\`javascript\n(function() {\n    window.os = window.os || {};\n    window.os.apps = window.os.apps || {};\n    \n    window.os.apps.viewer = function(path) {\n        var div = document.createElement('div');\n        div.className = 'viewer';\n        document.body.appendChild(div);\n        \n        window.os.gui.createWindow('View: ' + path, div);\n        \n        var content = window.os.fs.readPath(path);\n        \n        var pre = document.createElement('pre');\n        pre.className = 'content';\n        pre.innerHTML = content;\n        div.appendChild(pre);\n    };\n})();\n\n\`\`\`", "add browser to desktop.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework. All the \`os\` functions are already defined.\n### Instruction:\n Create a self executing function that executes \`os.gui.addIcon('Browser', '\ud83d\udcc1', () => os.apps.browser(''), document.body)\` \n### Response:\n\n----------------[ output ]----------------\nSure, here is how you can create a self-executing function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    os.gui.addIcon('Browser', '\ud83d\udcc1', () => os.apps.browser(''), document.body);\n})();\n\n\`\`\`"}, "games": {"minesweeper-styles.style": "\n----------------[ prompt ]----------------\nGenerate css code without the use of any library or framework.\n### Instruction:\n css style for a .gmroot class to follow the following rules:\n1. buttons in .gmroot be the size of 30px by 30px and overflow hidden \n### Response:\n\n----------------[ output ]----------------\nSure, here is an example CSS code that would apply these styles to elements with the \`.gmroot\` class:\n\n\`\`\`css\n.gmroot button {\n    width: 30px;\n    height: 30px;\n    overflow: hidden;\n}\n\n\`\`\`", "minesweeper-app.script": "\n----------------[ prompt ]----------------\nGenerate JS code using \`let\` instead of \`var\`. All the \`os\` functions are already defined.\n### Instruction:\n Create a self executing function that defines a function called \`minesweeper\` on the \`window.os.apps\` object having the following functionality:\n* creates a root dom element with the class \`gmroot\`\n* generate a matrix of 8x8 with values 0\n* pick a random of 3 cells and set their value to \`x\` and increase the number value of the neighboring cells\n* iterate through the matrix and for each row add a div dom element and for each item add a button with the class \`cell\` and  \`.\` as content. when the button is clicked, the content should be replaced with the value. when the user clicks on a cell with value \`x\` replace content with \`\ud83d\udca3\` and notify the user\n* call \`os.gui.createWindow\` with the following parameters: \`'\ud83d\udca3 minesweeper'\`, created root DOM element, \`250\`, \`280\` \n### Response:\n\n----------------[ output ]----------------\nHere is an example of how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    window.os = window.os || {};\n    window.os.apps = window.os.apps || {};\n    \n    window.os.apps.minesweeper = function() {\n        // create root dom element with class 'gmroot'\n        let root = document.createElement('div');\n        root.className = 'gmroot';\n        document.body.appendChild(root);\n        \n        // generate matrix of 8x8 with values 0\n        let matrix = Array(8).fill().map(() => Array(8).fill(0));\n        \n        // pick 3 random cells and set their value to 'x' and increase neighboring cells' values\n        let mines = Array(3).fill().map(() => [Math.floor(Math.random() * 8), Math.floor(Math.random() * 8)]);\n        mines.forEach(([x, y]) => {\n            matrix[x][y] = 'x';\n            for (let i = -1; i <= 1; i++) {\n                for (let j = -1; j <= 1; j++) {\n                    let nx = x + i, ny = y + j;\n                    if (nx >= 0 && nx < 8 && ny >= 0 && ny < 8 && matrix[nx][ny] !== 'x') {\n                        matrix[nx][ny]++;\n                    }\n                }\n            }\n        });\n        \n        // iterate through matrix and add div and button elements for each cell\n        matrix.forEach((row, x) => {\n            let div = document.createElement('div');\n            row.forEach((value, y) => {\n                let button = document.createElement('button');\n                button.className = 'cell';\n                button.textContent = '.';\n                button.onclick = () => {\n                    if (matrix[x][y] === 'x') {\n                        button.textContent = '\ud83d\udca3';\n                        alert('You hit a mine \ud83d\udca3');\n                    } else {\n                        button.textContent = value;\n                    }\n                };\n                div.appendChild(button);\n            });\n            root.appendChild(div);\n        });\n        \n        // call os.gui.createWindow with parameters '\ud83d\udca3 minesweeper', root DOM element, 250, 280\n        window.os.gui.createWindow('\ud83d\udca3 minesweeper', root, 250, 280);\n    };\n})();\n\n\`\`\`", "minesweeper-desktop-icon.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework. All the \`os\` functions are already defined.\n### Instruction:\n Create a self executing function that executes \`os.gui.addIcon('Minesweeper', '\ud83d\udca3', () => os.apps.minesweeper(), document.body)\` \n### Response:\n\n----------------[ output ]----------------\nSure, here is how you can create a self-executing function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    os.gui.addIcon('Minesweeper', '\ud83d\udca3', () => os.apps.minesweeper(), document.body);\n})();\n\n\`\`\`"}, "apps": {"editor-app.script": "\n----------------[ prompt ]----------------\nGenerate JS code using \`let\` instead of \`var\`. All the \`os\` functions are already defined.\n### Instruction:\n Create a self executing function that defines a function called \`editor\` on the \`window.os.apps\` object that takes a parameter \`path\` and having the following functionality:\n* creates a root dom element with the class \`editor\`\n* call \`os.gui.createWindow\` with the following parameters: \`'\ud83d\udcc4 Text Editor' {path || ''}\`, created root DOM element, \`500\`, \`500\` and store the returned value to constant \`win\`\n* call \`os.gui.toolbar(win)\` and store the returned value to constant \`toolbar\`\n* call \`toolbar.addButton\` with parameters '\ud83d\udcbe' and \`() => save()\`\n* add a \`textarea\` element to the root dom element, 100% width and height and nowrap for white-space\n* if the path is not empty, store result of executiing \`os.fs.readPath\` into \`content\` constant and set it to the \`textarea\`\n* create an internal function \`save\` that:\n - if the path is not empty, store the value of the \`textarea\` to the \`content\` constant and call \`os.fs.write\` with the \`path\` and \`textarea\` value\n - if the path is empty, call \`os.gui.createPrompt\` with the following parameters: \`'Save File'\` and \`os.gui.createPrompt('Enter folder name', path => os.fs.write(path, textarea.value))\` \n### Response:\n\n----------------[ output ]----------------\nHere is how you can implement this in JavaScript:\n\n\`\`\`javascript\n(function() {\n    window.os.apps.editor = function(path) {\n        const root = document.createElement('div');\n        root.className = 'editor';\n        document.body.appendChild(root);\n        \n        const win = os.gui.createWindow('\ud83d\udcc4 Text Editor', root, 500, 500);\n        const toolbar = os.gui.toolbar(win);\n        toolbar.addButton('\ud83d\udcbe', save);\n        \n        const textarea = document.createElement('textarea');\n        textarea.style.width = '100%';\n        textarea.style.height = '100%';\n        textarea.style.whiteSpace = 'nowrap';\n        root.appendChild(textarea);\n        \n        let content = '';\n        if (path) {\n            content = os.fs.readPath(path);\n            textarea.value = content;\n        }\n        \n        function save() {\n            if (path) {\n                content = textarea.value;\n                os.fs.write(path, content);\n            } else {\n                os.gui.createPrompt('Save File', (newPath) => {\n                    os.fs.write(newPath, textarea.value);\n                });\n            }\n        }\n    };\n})();\n\n\`\`\`", "editor-desktop-icon.script": "\n----------------[ prompt ]----------------\nGenerate browser vanilla JS code without the use of any library or framework. All the \`os\` functions are already defined.\n### Instruction:\n Create a self executing function that executes \`os.gui.addIcon('Text Editor', '\ud83d\udcc4', () => os.apps.editor(), document.body)\` \n### Response:\n\n----------------[ output ]----------------\nSure, here is how you can create a self-executing function in JavaScript:\n\n\`\`\`javascript\n(function() {\n    os.gui.addIcon('Text Editor', '\ud83d\udcc4', () => os.apps.editor(), document.body);\n})();\n\n\`\`\`"}}}
if (localStorage.getItem('filesystem') === null) {
  localStorage.setItem('filesystem', JSON.stringify(sources))
}


window.os = {
    apps: {}
};



(function() {
    // Load filesystem from localStorage, if it exists, otherwise initialize it as an empty object
    var filesystem = JSON.parse(localStorage.getItem('filesystem')) || {};
    
    // Define fs methods on window.os
    window.os = window.os || {};
    window.os.fs = {
        sync: function() {
            localStorage.setItem('filesystem', JSON.stringify(filesystem));
        },
        readPath: function(path) {
            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists
            var pathArray = path.split('/');
            var current = filesystem;
            for (var i = 0; i < pathArray.length; i++) {
                if (current[pathArray[i]] === undefined) {
                    return undefined;  // Path not found
                } else {
                    current = current[pathArray[i]];  // Traverse down the path
                }
            }
            return current;  // Return content at path
        },
        write: function(path, content) {
            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists
            var pathArray = path.split('/');
            var current = filesystem;
            for (var i = 0; i < pathArray.length - 1; i++) {  // Do not traverse to last element, we will assign content there
                if (current[pathArray[i]] === undefined) {
                    current[pathArray[i]] = {};  // Create path if it does not exist
                }
                current = current[pathArray[i]];  // Traverse down the path
            }
            current[pathArray[pathArray.length - 1]] = content;  // Assign content to last element in path
            this.sync();  // Save filesystem to localStorage
        },
        ls: function(path) {
            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists
            var current = filesystem;
            if (path) {
                var pathArray = path.split('/');
                for (var i = 0; i < pathArray.length; i++) {
                    if (current[pathArray[i]] === undefined) {
                        return undefined;  // Path not found
                    } else {
                        current = current[pathArray[i]];  // Traverse down the path
                    }
                }
            }
            return Object.keys(current);  // Return entries at path
        },
        mkdir: function(path, dirName) {
            this.write(path + '/' + dirName, {});  // Write an empty directory at path
        },
        rm: function(path) {
            path = path[0] === '/' ? path.slice(1) : path;  // Remove leading '/' if exists
            var pathArray = path.split('/');
            var current = filesystem;
            for (var i = 0; i < pathArray.length - 1; i++) {  // Do not traverse to last element, we will remove it here
                if (current[pathArray[i]] === undefined) {
                    return;  // Path not found, do nothing
                } else {
                    current = current[pathArray[i]];  // Traverse down the path
                }
            }
            delete current[pathArray[pathArray.length - 1]];  // Remove last element in path
            this.sync();  // Save filesystem to localStorage
        },
        isFile: function(path) {
            var content = this.readPath(path);
            return typeof content === 'string';  // Return true if content at path is a string
        }
    };
})();



if (typeof window.os === "undefined") {
    window.os = {};
}

window.os.gui = {};



(function() {
    if (!window.os || !window.os.gui) {
        window.os = window.os || {};
        window.os.gui = window.os.gui || {};
    }
    
    window.os.gui.utils = {
        setSizeAndCenter: function (root, width, height) {
            root.style.width = width + 'px';
            root.style.height = height + 'px';
            
            root.style.position = 'absolute';
            root.style.top = '50%';
            root.style.left = '50%';
            root.style.transform = 'translate(-50%, -50%)';
        }
    };
})();



(function() {
    window.os = window.os || {};
    window.os.gui = window.os.gui || {};
    window.os.gui.titleBar = function(title, targetElement) {
        // Create root DOM element
        var titleBar = document.createElement('div');
        titleBar.className = 'titleBar';
        
        // Add title to span and append to titleBar
        var titleSpan = document.createElement('span');
        titleSpan.textContent = title;
        titleBar.appendChild(titleSpan);
        
        // Add button to titleBar
        var closeButton = document.createElement('button');
        closeButton.textContent = 'x';
        closeButton.addEventListener('click', function() {
            document.body.removeChild(targetElement);
        });
        titleBar.appendChild(closeButton);
        
        // Add drag and drop functionality to titleBar
        var dragging = false;
        var startX;
        var startY;
        var offsetX;
        var offsetY;
        
        titleBar.addEventListener('mousedown', function(e) {
            dragging = true;
            startX = e.clientX;
            startY = e.clientY;
            offsetX = targetElement.offsetLeft;
            offsetY = targetElement.offsetTop;
        });
        
        titleBar.addEventListener('mouseup', function() {
            dragging = false;
        });
        
        titleBar.addEventListener('mousemove', function(e) {
            if (dragging) {
                var x = e.clientX - startX;
                var y = e.clientY - startY;
                targetElement.style.left = (offsetX + x) + 'px';
                targetElement.style.top = (offsetY + y) + 'px';
            }
        });
        
        return titleBar;
    };
})();



(function() {
    if (!window.os) window.os = {};
    if (!window.os.gui) window.os.gui = {};
    if (!window.os.gui.utils) window.os.gui.utils = { setSizeAndCenter: setSizeAndCenter }; // Assuming this exists somewhere else in your code
    
    window.os.gui.createWindow = function(title = "Default Title", content = null, width = 400, height = 300) {
        var root = document.createElement("div");
        root.className = "window";
        
        window.os.gui.utils.setSizeAndCenter(root, width, height);
        
        var titlePlaceholder = document.createElement("div");
        titlePlaceholder.className = "titlePlaceholder";
        root.appendChild(titlePlaceholder);
        
        var toolbarPlaceholder = document.createElement("div");
        toolbarPlaceholder.className = "toolbarPlaceholder";
        root.appendChild(toolbarPlaceholder);
        
        var contentPlaceholder = document.createElement("div");
        contentPlaceholder.className = "contentPlaceholder";
        root.appendChild(contentPlaceholder);
        
        var statusPlaceholder = document.createElement("div");
        statusPlaceholder.className = "statusPlaceholder";
        root.appendChild(statusPlaceholder);
        
        if(typeof window.os.gui.titleBar === 'function') {
            var titleBar = window.os.gui.titleBar(title, root);
            titlePlaceholder.appendChild(titleBar);
        }
        
        if(content && content instanceof Node) {
            contentPlaceholder.appendChild(content);
        }
        
        var bringToFront = function() {
            var windows = document.querySelectorAll(".window");
            for(var i = 0; i < windows.length; i++) {
                windows[i].style.zIndex = 1;
            }
            root.style.zIndex = 2;
        }
        
        root.onclick = bringToFront;
        
        document.body.appendChild(root);
        
        setTimeout(bringToFront, 20);
        
        return root;
    }
})();



(function() {
    // Check if window.os exists and is an object
    if (typeof window.os === 'undefined' || typeof window.os !== 'object') {
        window.os = {};
    }
    
    // Check if window.os.gui exists and is an object
    if (typeof window.os.gui === 'undefined' || typeof window.os.gui !== 'object') {
        window.os.gui = {};
    }
    
    // Define the updateStatus function
    window.os.gui.updateStatus = function(win, value) {
        var statusElement = win.querySelector('.statusPlaceholder');
        if (statusElement !== null && statusElement !== undefined) {
            statusElement.innerText = value;
        } else {
            console.error('Element with class .statusPlaceholder not found in provided win DOM element');
        }
    };
})();



(function() {
    if (!window.os) window.os = {};
    if (!window.os.gui) window.os.gui = {};
    
    window.os.gui.toolbar = function(rootElement) {
        var toolbar = document.createElement('div');
        toolbar.className = 'toolbar';
        
        rootElement.querySelector('.toolbarPlaceholder').appendChild(toolbar);
        
        return {
            addButton: function(text, callback) {
                var button = document.createElement('button');
                button.textContent = text;
                button.addEventListener('click', callback);
                toolbar.appendChild(button);
            }
        };
    };
})();



(function() {
    if (!window.os) window.os = {};
    if (!window.os.gui) window.os.gui = {};
    
    window.os.gui.createPrompt = function(title, callback) {
        // create root dom element with class 'editor'
        var root = document.createElement('div');
        root.className = 'editor';
        
        // add text input element to root dom element full width
        var input = document.createElement('input');
        input.style.width = '100%';
        root.appendChild(input);
        
        // add button element to root dom element and set text to 'OK'
        var button = document.createElement('button');
        button.textContent = 'OK';
        root.appendChild(button);
        
        // call os.gui.createWindow with given parameters
        var win = window.os.gui.createWindow(title, root, 300, 100);
        
        // when button is clicked, call callback with input value and remove win element from body
        button.addEventListener('click', function() {
            callback(input.value);
            document.body.removeChild(win);
        });
    };
})();



(function() {
    if (!window.os) window.os = {};
    if (!window.os.gui) window.os.gui = {};
    
    window.os.gui.addIcon = function(name, icon, callback, container) {
        // create root element
        var root = document.createElement('div');
        root.classList.add('icon');
        
        // create emoji element
        var emoji = document.createElement('div');
        emoji.classList.add('emoji');
        
        // create app-name element
        var appName = document.createElement('div');
        appName.classList.add('app-name');
        appName.textContent = name;
        
        // add icon to emoji element
        emoji.textContent = icon;
        
        // add event listener to root element
        root.addEventListener('click', callback);
        
        // add elements to root element
        root.appendChild(emoji);
        root.appendChild(appName);
        
        // add icon to container
        container.appendChild(root);
        
        // add icon-* class to emoji element if name contains dot character
        if (name.includes('.')) {
            var extension = name.split('.').pop();
            emoji.classList.add('icon-' + extension);
        }
    };
})();



(function() {
    window.os = window.os || {};
    window.os.apps = window.os.apps || {};
    
    window.os.apps.browser = function(path) {
        const root = document.createElement('div');
        root.className = 'browser';
        document.body.appendChild(root);
        
        const win = os.gui.createWindow('Browser', root);
        const toolbar = os.gui.toolbar(win);
        
        toolbar.addButton('📁', () => {
            os.gui.createPrompt('Enter folder name', name => {
                os.fs.mkdir(path, name);
                refresh();
            });
        });
        
        toolbar.addButton('📄', () => {
            os.gui.createPrompt('Enter file name', name => {
                os.fs.write(path + '/' + name, "");
                refresh();
            });
        });
        
        toolbar.addButton('🗑️', () => {
            os.fs.rm(path);
            path = path.substring(0, path.lastIndexOf('/'));
            refresh();
        });
        
        const refresh = () => {
            while (root.firstChild) {
                root.removeChild(root.firstChild);
            }
            
            os.gui.updateStatus(win, path);
            
            const files = os.fs.ls(path);
            
            if (path.length > 1) {
                os.gui.addIcon('..', '🔙', () => {
                    path = path.substring(0, path.lastIndexOf('/'));
                    refresh();
                }, root);
            }
            
            files.forEach(name => {
                const isFile = os.fs.isFile(path + '/' + name);
                
                const callback = isFile ? 
                    () => { os.apps.editor(path + '/' + name); refresh(); } : 
                    () => { path = path + '/' + name; refresh(); };
                
                os.gui.addIcon(name, isFile ? '📄' : '📁', callback, root);
            });
        };
        
        refresh();
    };
})();



(function() {
    window.os = window.os || {};
    window.os.apps = window.os.apps || {};
    
    window.os.apps.viewer = function(path) {
        var div = document.createElement('div');
        div.className = 'viewer';
        document.body.appendChild(div);
        
        window.os.gui.createWindow('View: ' + path, div);
        
        var content = window.os.fs.readPath(path);
        
        var pre = document.createElement('pre');
        pre.className = 'content';
        pre.innerHTML = content;
        div.appendChild(pre);
    };
})();



(function() {
    window.os = window.os || {};
    window.os.apps = window.os.apps || {};
    
    window.os.apps.minesweeper = function() {
        // create root dom element with class 'gmroot'
        let root = document.createElement('div');
        root.className = 'gmroot';
        document.body.appendChild(root);
        
        // generate matrix of 8x8 with values 0
        let matrix = Array(8).fill().map(() => Array(8).fill(0));
        
        // pick 3 random cells and set their value to 'x' and increase neighboring cells' values
        let mines = Array(3).fill().map(() => [Math.floor(Math.random() * 8), Math.floor(Math.random() * 8)]);
        mines.forEach(([x, y]) => {
            matrix[x][y] = 'x';
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    let nx = x + i, ny = y + j;
                    if (nx >= 0 && nx < 8 && ny >= 0 && ny < 8 && matrix[nx][ny] !== 'x') {
                        matrix[nx][ny]++;
                    }
                }
            }
        });
        
        // iterate through matrix and add div and button elements for each cell
        matrix.forEach((row, x) => {
            let div = document.createElement('div');
            row.forEach((value, y) => {
                let button = document.createElement('button');
                button.className = 'cell';
                button.textContent = '.';
                button.onclick = () => {
                    if (matrix[x][y] === 'x') {
                        button.textContent = '💣';
                        alert('You hit a mine 💣');
                    } else {
                        button.textContent = value;
                    }
                };
                div.appendChild(button);
            });
            root.appendChild(div);
        });
        
        // call os.gui.createWindow with parameters '💣 minesweeper', root DOM element, 250, 280
        window.os.gui.createWindow('💣 minesweeper', root, 250, 280);
    };
})();



(function() {
    window.os.apps.editor = function(path) {
        const root = document.createElement('div');
        root.className = 'editor';
        document.body.appendChild(root);
        
        const win = os.gui.createWindow('📄 Text Editor', root, 500, 500);
        const toolbar = os.gui.toolbar(win);
        toolbar.addButton('💾', save);
        
        const textarea = document.createElement('textarea');
        textarea.style.width = '100%';
        textarea.style.height = '100%';
        textarea.style.whiteSpace = 'nowrap';
        root.appendChild(textarea);
        
        let content = '';
        if (path) {
            content = os.fs.readPath(path);
            textarea.value = content;
        }
        
        function save() {
            if (path) {
                content = textarea.value;
                os.fs.write(path, content);
            } else {
                os.gui.createPrompt('Save File', (newPath) => {
                    os.fs.write(newPath, textarea.value);
                });
            }
        }
    };
})();


</script>
<style>
.titleBar {
    background-color: orange;
    border-bottom: 1px solid black;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: monospace;
    font-size: small;
    padding: 5px;
    user-select: none; /* This will prevent text selection */
}

/* This will apply styles to all buttons inside titleBar */
.titleBar button {
    border: 1px solid black;
    font-family: monospace;
    font-size: small;
    border-radius: 2px; /* This will give rounded corners */
}



.window {
    position: absolute;
    display: flex;
    flex-direction: column;
    background-color: white;
    padding: 1px;
    border: 2px solid black;
    border-radius: 4px;
}

.contentPlaceholder {
    flex-grow: 1;
    overflow: auto;
    padding: 5px;
}

.toolbarPlaceholder {
    border-bottom: 1px solid black;
}

.statusPlaceholder {
    border-top: 1px solid black;
    font-family: monospace;
    font-size: small;
}



.toolbar {
    padding: 3px 5px;
    margin-bottom: 2px;
    display: flex;
    justify-content: flex-start;
}

.toolbar button {
    border: none;
    cursor: pointer;
    background-color: white;
}

.toolbar button:hover {
    background-color: lightgray;
}



body {
    background-color: #2E393D;
}

body > .icon > .app-name {
    color: white;
}



.icon {
    width: 64px;
    min-height: 64px;
    text-align: center;
    margin: 5px;
    cursor: pointer;
}

.emoji {
    display: inline-block;
    font-size: 30px;
    position: relative;
}

.app-name {
    display: block;
    font-size: 8px;
    font-family: monospace;
    color: black;
    padding: 5px;
    word-wrap: break-word;
}



.icon-script::after {
    content: "\1F4DC";
    position: absolute;
    bottom: 0;
    left: 0;
    font-size: 16px;
}

.icon-style::after {
    content: "\1F3A8";
    position: absolute;
    bottom: 0;
    left: 0;
    font-size: 16px;
}

.icon-html::after {
    content: "\1F4C4";
    position: absolute;
    bottom: 0;
    left: 0;
    font-size: 16px;
}

.icon-txt::after {
    content: "\1F4C4";
    position: absolute;
    bottom: 0;
    left: 0;
    font-size: 16px;
}



.browser {
    display: flex;
    flex-wrap: wrap;
}



.gmroot button {
    width: 30px;
    height: 30px;
    overflow: hidden;
}


</style>
</head>
<body>
<script>
(function() {
    os.gui.addIcon('Browser', '📁', () => os.apps.browser(''), document.body);
})();



(function() {
    os.gui.addIcon('Minesweeper', '💣', () => os.apps.minesweeper(), document.body);
})();



(function() {
    os.gui.addIcon('Text Editor', '📄', () => os.apps.editor(), document.body);
})();


</script>
</body>
</html>