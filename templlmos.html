<html>
 <head>
  <style id="osbase_general-styles">
   body {
    background-color: #ffe4e1; /* This is a hexadecimal representation of a light pink color */
}
  </style>
  <script id="osbase_global-objects">
   (() => {
window.os = {};


})()
  </script>
  <script id="osbase_filesystem">
   (() => {
if (!window.os) {
    window.os = {};
}
if (!window.os.fs) {
    window.os.fs = {
        filesystem: {},
        sync: function () {
            window.localStorage.setItem('filesystem', JSON.stringify(this.filesystem));
        },
        readPath: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let part of parts) {
                if (obj[part] === undefined) {
                    return undefined;
                } else {
                    obj = obj[part];
                }
            }
            return obj;
        },
        write: function (path, content) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    obj[parts[i]] = {};
                }
                obj = obj[parts[i]];
            }
            obj[parts[parts.length - 1]] = content;
            this.sync();
        },
        ls: function (path = '') {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let obj = this.filesystem;
            if (path !== '') {
                let parts = path.split('/');
                for (let part of parts) {
                    if (obj[part] === undefined) {
                        return undefined;
                    } else {
                        obj = obj[part];
                    }
                }
            }
            return Object.keys(obj);
        },
        mkdir: function (path, dirName) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    obj[parts[i]] = {};
                }
                obj = obj[parts[i]];
            }
            obj[dirName] = {};
            this.sync();
        },
        rm: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            let parent = obj;
            for (let i = 0; i < parts.length - 1; i++) {
                if (obj[parts[i]] === undefined) {
                    return;
                } else {
                    parent = obj;
                    obj = obj[parts[i]];
                }
            }
            delete parent[parts[parts.length - 1]];
            this.sync();
        },
        isFile: function (path) {
            if (path[0] === '/') {
                path = path.substring(1);
            }
            let parts = path.split('/');
            let obj = this.filesystem;
            for (let part of parts) {
                if (obj[part] === undefined || typeof obj[part] !== 'string') {
                    return false;
                } else {
                    obj = obj[part];
                }
            }
            return true;
        }
    };
}


})()
  </script>
  <style id="desktop_content-style">
   #desktop_content {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow-y: hidden;
    padding: 10px;
    display: flex;
    flex-wrap: wrap;
    flex-direction: column;
    align-content: flex-start;
}
  </style>
  <style id="desktop_styles">
   .icon {
    width: 64px;
    min-height: 64px;
    text-align: center;
    margin: 5px;
    cursor: pointer;
}

.emoji {
    display: inline-block;
    font-size: 30px;
    position: relative;
}

.title {
    display: block;
    font-size: 8px;
    font-family: monospace;
    color: black;
    padding: 5px;
    word-wrap: break-word;
    border: 2px solid black;
    background-color: white;
    border-radius: 5px;
}
  </style>
  <script id="desktop_desktop-app">
   (() => {
// Check if os.desktop exists, if not create it
if (!window.os) {
    window.os = {};
}
if (!window.os.desktop) {
    window.os.desktop = {};
}

// Add addApp function to os.desktop
window.os.desktop.addApp = function(emoji, title, callback) {
    // Create root DOM element with class .icon
    var icon = document.createElement('div');
    icon.className = 'icon';
    
    // Create span with class .emoji and add it to icon
    var emojiSpan = document.createElement('span');
    emojiSpan.className = 'emoji';
    emojiSpan.textContent = emoji;
    icon.appendChild(emojiSpan);
    
    // Create span with class .title and add it to icon
    var titleSpan = document.createElement('span');
    titleSpan.className = 'title';
    titleSpan.textContent = title;
    icon.appendChild(titleSpan);
    
    // Append icon to #desktop_content
    document.querySelector('#desktop_content').appendChild(icon);
    
    // Add click event listener to icon
    icon.addEventListener('click', function() {
        // Call callback when icon is clicked
        if (typeof callback === 'function') {
            callback();
        }
    });
};


})()
  </script>
  <style id="gui_gui-styles">
   .titleBar {
    background-color: orange;
    border-bottom: 1px solid black;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: monospace;
    font-size: small;
    padding: 5px;
    user-select: none; /* This will prevent text selection */
}

/* This will apply styles to buttons inside the title bar */
.titleBar button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 6;
    padding: 0; /* This will remove default button padding */
}

.window {
    position: absolute;
    display: flex;
    flex-direction: column;
    background-color: white;
    padding: 0;
    border: 2px solid black;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 4px 4px 0 0 rgba(0,0,0,0.5);
}

.contentPlaceholder {
    flex-grow: 1;
    overflow: auto;
    padding: 5px;
}

.toolbarPlaceholder {
    border-bottom: 1px solid black;
}

.statusPlaceholder {
    border-top: 1px solid black;
    font-family: monospace;
    font-size: small;
}

.resizeHandle {
    width: 0px;
    height: 0px;
    position: absolute;
    bottom: 0;
    right: 0;
    cursor: se-resize;
    border-width: 0 0 5px 5px;
    border-style: solid;
    border-color: transparent transparent #ff7200 transparent;
    transform: rotate(0deg);
}
  </style>
  <script id="gui_gui-global-objects">
   (() => {
if (typeof window.os === 'undefined') {
    window.os = {};
}

window.os.gui = {};


})()
  </script>
  <script id="gui_draggable">
   (() => {
// Assuming window.os is already defined and has a gui property
if (!window.os) {
    window.os = {};
}
if (!window.os.gui) {
    window.os.gui = {};
}

// Define makeDraggable function
window.os.gui.makeDraggable = function (root, dragHandle) {
    let offsetX = 0;
    let offsetY = 0;
    let mouseX = 0;
    let mouseY = 0;
    
    const handleMouseDown = function (e) {
        e = e || window.event;
        mouseX = e.clientX;
        mouseY = e.clientY;
        offsetX = root.offsetLeft - mouseX;
        offsetY = root.offsetTop - mouseY;
        
        document.onmouseup = function () {
            document.onmousemove = null;
            document.onmouseup = null;
        };
        
        document.onmousemove = function (e) {
            e = e || window.event;
            mouseX = e.clientX;
            mouseY = e.clientY;
            root.style.left = (mouseX + offsetX) + 'px';
            root.style.top = (mouseY + offsetY) + 'px';
        };
    };
    
    dragHandle.onmousedown = handleMouseDown;
};

// Assuming window.os exists and has a gui property
if (!window.os) {
    window.os = {};
}
if (!window.os.gui) {
    window.os.gui = {};
}

// Define makeResizable function
window.os.gui.makeResizable = function(root, resizeHandle) {
    let startX;
    let startY;
    let startWidth = root.offsetWidth;
    let startHeight = root.offsetHeight;
    
    // Handle mousedown event to start resizing
    resizeHandle.addEventListener('mousedown', function(e) {
        e.preventDefault();
        startX = e.clientX;
        startY = e.clientY;
        
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', handleMouseUp);
    });
    
    // Handle mousemove event to resize element
    function handleMouseMove(e) {
        let width = startWidth + e.clientX - startX;
        let height = startHeight + e.clientY - startY;
        
        root.style.width = width + 'px';
        root.style.height = height + 'px';
    }
    
    // Handle mouseup event to stop resizing and update starting width and height
    function handleMouseUp() {
        startWidth = root.offsetWidth;
        startHeight = root.offsetHeight;
        
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
    }
};

if (!window.os || !window.os.gui) {
    window.os = window.os || {};
    window.os.gui = window.os.gui || {};
}

window.os.gui.bringToFront = function (rootDomNode) {
    // Internal function to bring other nodes to front
    var bringOthersToFront = function () {
        // Get all nodes with same class as rootDomNode
        var nodes = document.getElementsByClassName(rootDomNode.className);
        // Iterate through them and set z-index to 0
        for (var i = 0; i < nodes.length; i++) {
            nodes[i].style.zIndex = 0;
        }
        // Set z-index of rootDomNode to 1
        rootDomNode.style.zIndex = 1;
    }
    
    // Add mousedown event listener to rootDomNode
    rootDomNode.addEventListener('mousedown', bringOthersToFront);
}


})()
  </script>
  <script id="gui_titleBar">
   (() => {
if (!window.os) window.os = {};
if (!window.os.gui) window.os.gui = {};

window.os.gui.titleBar = function(parentElement, title, close) {
    // Create root DOM element with class .titleBar
    var root = document.createElement('div');
    root.className = 'titleBar';
    
    // Add span containing title to root DOM element
    var span = document.createElement('span');
    span.textContent = title;
    root.appendChild(span);
    
    // Add button with text '❌' and class 'close' to root DOM element
    var button = document.createElement('button');
    button.textContent = '❌';
    button.className = 'close';
    button.addEventListener('click', close); // Add event listener for close callback
    root.appendChild(button);
    
    // Append root DOM element to parentElement
    parentElement.appendChild(root);
};


})()
  </script>
  <script id="gui_window">
   (() => {
// Ensure window.os and window.os.gui exist
if (!window.os) {
    window.os = {};
}
if (!window.os.gui) {
    window.os.gui = {};
}

// Define createWindow function
window.os.gui.createWindow = function (emoji = '🖥️', title = 'Window', contentElement = null, width = 400, height = 300) {
    // Create root DOM element with class .window and add it to document body in the middle of the document
    const root = document.createElement('div');
    root.className = 'window';
    root.style.width = width + 'px';
    root.style.height = height + 'px';
    document.body.appendChild(root);
    
    // Call bringToFront on root element
    window.os.gui.bringToFront(root);
    
    // Add placeholder divs to root DOM element
    const titlePlaceholder = document.createElement('div');
    titlePlaceholder.className = 'titlePlaceholder';
    root.appendChild(titlePlaceholder);
    
    const toolbarPlaceholder = document.createElement('div');
    toolbarPlaceholder.className = 'toolbarPlaceholder';
    root.appendChild(toolbarPlaceholder);
    
    const contentPlaceholder = document.createElement('div');
    contentPlaceholder.className = 'contentPlaceholder';
    root.appendChild(contentPlaceholder);
    
    const statusPlaceholder = document.createElement('div');
    statusPlaceholder.className = 'statusPlaceholder';
    root.appendChild(statusPlaceholder);
    
    // Add resize handle to root DOM element
    const resizeHandle = document.createElement('div');
    resizeHandle.className = 'resizeHandle';
    root.appendChild(resizeHandle);
    
    // Create and add title bar to titlePlaceholder
    window.os.gui.titleBar(titlePlaceholder, emoji + ' ' + title, () => {
        document.body.removeChild(root);
    });
    
    // Make root element draggable by titlePlaceholder and resizable by resizeHandle
    window.os.gui.makeDraggable(root, titlePlaceholder);
    window.os.gui.makeResizable(root, resizeHandle);
    
    // Append content element to contentPlaceholder if it exists
    if (contentElement) {
        contentPlaceholder.appendChild(contentElement);
    }
    
    return null;
};


})()
  </script>
  <script id="apps_app">
   (() => {
window.os = window.os || {};

window.os.application = function(title, emoji, callback, width=400, height=400) {
    // Create an internal initialize function that creates a new window with the title, emoji, width and height and add child the element returned by executing of the callback passed as parameter
    const initialize = () => {
        const contentElement = document.createElement('div');
        contentElement.appendChild(callback()); // Assuming callback returns an element
        window.os.gui.createWindow(emoji, title, contentElement, width, height);
    };
    
    // Call addApp with the emoji, title and initialize function 
    window.os.desktop.addApp(emoji, title, initialize);
};


})()
  </script>
 </head>
 <body>
  <div id="desktop_content">
  </div>
  <script id="apps_hello-world">
   (() => {
function helloWorld() {
    // Create a root dom element with class 'hw'
    var root = document.createElement('div');
    root.className = 'hw';
    
    // Create a new 'h1' element with the text 'Hello, World!' and append it to the root element
    var h1 = document.createElement('h1');
    h1.textContent = 'Hello, World👋';
    root.appendChild(h1);
    
    // Return root dom element
    return root;
}

// Create application with 'hello world' title, 👋 as emoji, helloWorld function and 300x200 size
window.os.application('hello world', '👋', helloWorld, 300, 200);


})()
  </script>
 </body>
</html>
